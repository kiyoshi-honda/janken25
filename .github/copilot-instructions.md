# GitHub Copilot 指示書

## 基本方針

- **日本語で応答すること**: すべてのドキュメント、コメント、メッセージは日本語で作成してください
- **要求の明確化**: 必要に応じて、ユーザーに質問を行い、要求を明確にしてください
- **作業報告**: 作業後、作業内容とユーザーが次に取れる行動を説明してください
- **段階的な実装**: 作業項目が多い場合は、段階に区切り、git commit を行いながら進めてください
  - semantic commit を使用する（feat:, fix:, docs:, refactor:, test: など）
- **コマンド確認**: コマンドの出力が確認できない場合、get last command / check background terminal を使用して確認してください

## 開発ワークフロー

各作業フェーズを以下のように定義します。

### 調査フェーズ

ユーザーから「調査」と指示された場合：

- 調査結果を `docs/reports/` ディレクトリに都度記載すること
- ファイル名は調査日時や内容が分かるようにする（例：`YYYY-MM-DD_調査内容.md`）
- 調査内容、発見した事項、推奨事項を明確に記載すること

### 計画フェーズ

ユーザーから「計画」と指示された場合：

- ここに記載された内容をまず最初に読み込み，ユーザにも提示すること
- `docs/tasks.md` に計画を記載すること
  - `docs/tasks.md` に前回の内容が残っている場合は、読まずに消して構わない
- すべてのコードベース及び `docs` を読み込み、要件に関連性のあるファイルパスをすべて記載すること
- ファイルパスはワークスペースのルートから必ず記載すること
- タスクは具体的かつ正常に動作することを確認可能で実行可能な最小単位に分割し，優先順位をつけること
- タスクごとに必要な関連ファイルをすべて記載し，動作を確認するために必要な入力や手順，テストコードについての言及も行うこと
- **重要**: このフェーズでは、コードを書いては絶対にいけない

### 実装フェーズ

ユーザーから「実装」と指示された場合：

- ここに記載された内容をまず最初に読み込み，ユーザにも提示すること
- 実装を開始する前に自分がmainブランチにいることを確認すること．mainブランチにいない場合はmainブランチに移動すること．
- mainブランチにいることが確認出来たら，`git switch`を用いて新規実装のための新しいブランチを作成すること（ブランチ名の例：feat/機能名）
- `docs/tasks.md` に記載された内容に基づいて実装を行うこと
- 記載されている以上の実装を絶対に行わないこと
- このフェーズではデバッグは行わないこと
- 実装完了時には以下を行うこと：
  - `docs/requirements.md` にユーザが要求した仕様を記載する
  - `docs/specs.md` に実装した機能の仕様を記載する
  - `docs/tasks_done.md` に完了したタスクと日付，そのタスクが正常に動作することを確認するための手順や入力情報を詳細に記載すること
  - `git add`、`git commit`を行うこと
  - semmantic commit を使用すること

### デバッグフェーズ

ユーザーから「デバッグ」と指示された場合：

- ここに記載された内容をまず最初に読み込み，ユーザにも提示すること
- 対象のタスクとそのタスクで発生しているエラーや障害についての「調査」と「計画」が行われているか `docs/reports/` と`docs/tasks.md`を確認し，行われていない場合はまず「調査」を行うこと
- デバッグを開始する前に自分がmainブランチにいることを確認すること．mainブランチにいない場合はmainブランチに移動すること．
- mainブランチにいることが確認出来たら，`git switch`を用いて新規実装のための新しいブランチを作成すること（ブランチ名の例：debug/デバッグ内容）
- `docs/tasks.md` に記載された内容に基づいてデバッグを行うこと
- 記載されている以上のデバッグを絶対に行わないこと
- デバッグ完了時には以下を行うこと：
  - `docs/specs.md` にデバッグした内容と結果を記載する
  - `docs/tasks_done.md` に完了したタスクと日付，そのタスクが正常に動作することを確認するための手順や入力情報を詳細に記載すること
  - `git add`、`git commit`を行うこと
  - semmantic commit を使用すること

## ドキュメント構造

プロジェクトでは以下のドキュメント構造を使用します：

| ファイルパス | 用途 |
|------------|------|
| `docs/reports/*.md` | 調査レポート。調査内容を日付や内容でファイル名をつけて保存 |
| `docs/schema.md` | データベーススキーマやデータ構造の定義 |
| `docs/specs.md` | 現状のシステム仕様。実装済みの機能を記載 |
| `docs/requirements.md` | 要件定義。プロジェクトの要求事項を記載 |
| `docs/tasks.md` | 現在の作業計画。計画フェーズで作成・更新 |
| `docs/tasks_done.md` | 完了した作業計画の履歴 |

## コーディング規約

- プロジェクトの既存のコーディングスタイルに従うこと
- 適切なコメントを日本語で記述すること
- テストコードも必要に応じて作成すること
- コミットメッセージは semantic commit に従うこと
- referenceを参照するよう指定されている場合は、必ず参照した上で実装を行うこと

## 注意事項

- 実装フェーズ，デバッグフェーズでは計画に記載された範囲を超えないこと
- 各フェーズの目的を明確に理解し、フェーズ外の作業を行わないこと
- ドキュメントは常に最新の状態に保つこと
- 本copilot-instuctions.mdは下記サイトを参考に作成している
  - https://qiita.com/ulxsth/items/b2e6f366e3f87ca2ae1c
